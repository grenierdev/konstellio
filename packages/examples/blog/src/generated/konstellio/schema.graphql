# Code generated by konstellio (@konstellio/cli@0.2.9). DO NOT EDIT.
# Please don't change this file manually but run `konstellio generate` to update it.
# For more information, please read the docs: https://konstell.io/docs/cli/

scalar Cursor

scalar Date

scalar DateTime

scalar Upload

directive @collection(type: String, indexes: [DirectiveIndex!]) on OBJECT | ENUM | UNION

enum DirectiveIndexType {
  primary
  index
  unique
}

enum DirectiveIndexFieldDirection {
  asc
  desc
}

input DirectiveIndexField {
  handle: String!
  direction: DirectiveIndexFieldDirection
}

input DirectiveIndex {
  handle: String!
  type: DirectiveIndexType!
  fields: [DirectiveIndexField]!
}

directive @localized on FIELD_DEFINITION

directive @computed on FIELD_DEFINITION

directive @hidden on FIELD_DEFINITION

directive @inlined on FIELD_DEFINITION

type Query {
  _ImATeaPot: Boolean
  me: User! @permission(role: "auth.loggedin")
  latestPost(first: Int, after: Cursor): [PostCursor!]!
}

type Mutation {
  _ImATeaPot: Boolean
  login(username: String!, password: String!): LoginResponse @permission(role: "auth.loggedout")
  createPost(data: PostInput): Boolean
}

type Subscription {
  _ImATeaPot: Boolean
  postAdded: Post
}

directive @permission(role: String, roles: [String!]) on FIELD_DEFINITION

type UserGroup @collection {
  id: ID!
  name: String!
  roles: [String!]!
}

type User @collection(indexes: [{handle: "User_username", type: "unique", fields: [{handle: "username", direction: "asc"}]}]) {
  id: ID!
  username: String!
  password: String! @hidden
  groups: [UserGroup!]!
}

type LoginResponse {
  token: String!
}

type LogoutResponse {
  acknowledge: Boolean!
}

type Post @collection(indexes: [{handle: "Post_slug", type: "unique", fields: [{handle: "slug", direction: "asc"}]}]) {
  id: ID!
  title: String! @localized
  slug: String! @localized
  categories: [PostCategory!]!
  postDate: DateTime!
  expireDate: DateTime
  author: User!
  contributors: [User!]!
  content: String! @localized
}

type PostCategory @collection(type: "structure", indexes: [{handle: "PostCategory_slug", type: "unique", fields: [{handle: "slug", direction: "asc"}]}]) {
  id: ID!
  title: String! @localized
  slug: String! @localized
}

type PostCursor {
  cursor: String
  item: Post!
}
